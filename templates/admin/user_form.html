{% extends "layout.html" %}

{% block title %}Користувач — ВПФК{% endblock %}

{% block content %}
  <section class="section">
    <div class="container admin-shell">
      <div class="admin-header">
        <div>
          <h1>{{ 'Редагування користувача' if user else 'Новий користувач' }}</h1>
          <p>Власник створює адміністраторів та редакторів, адміністратор — редакторів.</p>
        </div>
        <a class="btn outline" href="{{ url_for('admin_users') }}">Назад</a>
      </div>

      <div class="admin-card">
        <form method="post" class="form-grid">
          <label class="form-field">
            Логін
            <input class="input" name="username" type="text" value="{{ user.username if user else '' }}" required />
          </label>
          <label class="form-field">
            Прізвище
            <input class="input" name="last_name" type="text" value="{{ user.last_name|clean_text if user else '' }}" />
          </label>
          <label class="form-field">
            Ім'я
            <input class="input" name="first_name" type="text" value="{{ user.first_name|clean_text if user else '' }}" />
          </label>
          <label class="form-field">
            По батькові
            <input class="input" name="middle_name" type="text" value="{{ user.middle_name|clean_text if user else '' }}" />
          </label>
          <label class="form-field">
            Посада
            <input class="input" name="position" type="text" value="{{ user.position|clean_text if user else '' }}" />
          </label>
          <label class="form-field">
            Коротко про користувача
            <textarea class="textarea" name="profile_text" rows="3">{{ user.profile_text|clean_text if user else '' }}</textarea>
          </label>
          <label class="form-field">
            Роль
            <select class="select" name="role">
              {% for role in roles %}
                <option value="{{ role }}" {% if user and user.role == role %}selected{% endif %}>
                  {{ role }}
                </option>
              {% endfor %}
            </select>
          </label>
          <label class="form-field">
            Пароль {{ ' (залишіть порожнім, щоб не змінювати)' if user else '' }}
            <input class="input" name="password" type="password" {{ 'required' if not user else '' }} />
          </label>
          <button class="btn primary" type="submit">{{ 'Зберегти' if user else 'Створити' }}</button>
        </form>
      </div>
    </div>
  </section>
{% endblock %}
